
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cotizaciones</title>
    <link rel="icon" href="https://djoyasweb.github.io/asistente/img/FaviconSoporte.jpg" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
</head>

<body class="protegido" data-theme="light">
  <div class="overlay" id="overlay" onclick="closeMobileSidebar()"></div>

  <!-- Sidebar -->
<div class="sidebar oculta-permisos" id="sidebar">
    <div>
      <h2 onclick="toggleSidebar()" data-tooltip="Dashboard">
        <span class="icon"><i class="fas fa-bars"></i></span>
        <span class="label"><img src="https://djoyasweb.github.io/asistente/img/logo.png" width="90px"></span>
      </h2>
      <nav>
        <a href="dashboard.html" data-tab="dashboard" data-tooltip="Inicio"><span class="icon"><i class="fas fa-home"></i></span><span class="label">Inicio</span></a>
        <a href="blog.html" data-tab="blog" data-tooltip="blog"><span class="icon"><i class="fa-brands fa-blogger"></i></span><span class="label">DJOYAS Blog</span></a>
        <a href="creative.html" data-tab="creative" data-tooltip="Uso"><span class="icon"><i class="fa-solid fa-globe"></i></span><span class="label">HMTL</span></a>
        <a href="inspira.html" data-tab="inspira" data-tooltip="Inspira"><span class="icon"><i class="fa-solid fa-photo-film"></i></span><span class="label">DJOYAS Inspira</span></a>
         <a href="planilla.html" data-tab="planilla" data-tooltip="Planilla"><span class="icon"><i class="fa-solid fa-file-excel"></i></span><span class="label">Planilla Presta</span></a>    
         <a href="catalogo.html" data-tab="catalogo" data-tooltip="Cat√°logo"><span class="icon"><i class="fa-regular fa-address-card"></i></span><span class="label">Cat√°logo</span></a>
          <a href="mysql.html" data-tab="mysql" data-tooltip="Mysql"><span class="icon"><i class="fa-solid fa-code"></i></span><span class="label">Mysql</span></a>
          <a href="cotizaciones.html" data-tab="cotizacion" data-tooltip="Cotizaciones"><span class="icon"><i class="fa-solid fa-code"></i></span><span class="label">Cotizaciones</span></a>
        </nav>
    </div>
    <div class="bottom-links">
      <a href="tareas.html" data-tab="tareas" data-tooltip="Tareas Diarias"><span class="icon"><i class="fas fa-list-check"></i></span><span class="label">Tareas Diarias</span></a>
      <a href="calendario.html" data-tab="calendario" data-tooltip="calendario"><span class="icon"><i class="fa-solid fa-calendar-days"></i></span><span class="label">Calendario</span></a>
        <a href="configuracion.html" data-tab="configuracion" data-tooltip="Configuraci√≥n"><span class="icon"><i class="fas fa-cog"></i></span><span class="label">Configuraci√≥n</span></a>
    </div>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
        <div class="topbar">
      <button class="menu-btn" onclick="toggleMobileSidebar()">‚ò∞</button>
      <div class="profile-section">
        <img src="https://i.pravatar.cc/300" alt="Perfil" class="profile-img" id="avatar" onclick="toggleDropdown()" />
        <div class="dropdown-menu" id="dropdown">
          <div class="user-info">
            <div class="user-name"><strong id="userName">Juan P√©rez</strong></div>
            <div class="user-email"><span id="userEmail">juan@correo.com</span></div>
          </div>
          <div class="theme-switch" onclick="toggleTheme()">
            <span class="switch-icon" id="theme-icon">üåô</span>
            <span class="switch-label">Modo oscuro</span>
          </div>
          <a href="settings.html">Configuraci√≥n</a>
          <a href="#" onclick="logout()">Cerrar sesi√≥n</a>
        </div>
      </div>
    </div>





<div class="container">
<!-- =========================
     COTIZACIONES ‚Äì CONTENEDOR
     ========================= -->
<div id="cotizacionesApp" data-theme="light">
  <!-- Encabezado -->
  <div class="cotz-header">
    <h1 class="cotz-title">Cotizaciones</h1>
    <button id="cotzBtnNueva" class="cotz-btn-primary">Crear nueva cotizaci√≥n</button>
  </div>

  <!-- Vista Listado -->
  <section id="cotzVistaListado" class="cotz-card">
    <div class="cotz-table-wrap">
      <table class="cotz-table">
        <thead>
          <tr>
            <th>ID de cotizaci√≥n</th>
            <th>Nombre Clienta</th>
            <th>Fecha de cotizaci√≥n</th>
            <th>Sucursal</th>
            <th class="cotz-right">Monto</th>
          </tr>
        </thead>
        <tbody id="cotzTbodyListado">
          <!-- Se rellena por JS -->
        </tbody>
      </table>
      <div id="cotzVacio" class="cotz-empty d-none">No hay cotizaciones a√∫n.</div>
    </div>
  </section>

<!-- Vista Editor -->
<section id="cotzVistaEditor" class="cotz-card d-none">
  <div class="cotz-editor-header">
    <button id="cotzBtnVolver" class="cotz-btn-ghost">‚Üê Volver</button>
    <div class="cotz-spacer"></div>
    <!-- (Se elimina el bot√≥n Guardar de aqu√≠) -->
  </div>

  <!-- Secci√≥n 1: Datos de Cliente(a) -->
  <div class="cotz-section">
    <h2 class="cotz-h2">Datos de Cliente(a)</h2>
    <div class="cotz-grid2">
      <label class="cotz-field">
        <span>Nombre *</span>
        <input id="cotzCliNombre" type="text" placeholder="Ej: Mar√≠a L√≥pez" required />
      </label>
      <label class="cotz-field">
        <span>Correo *</span>
        <input id="cotzCliCorreo" type="email" placeholder="Ej: maria@email.cl" required />
      </label>
      <label class="cotz-field">
        <span>RUT *</span>
        <input id="cotzCliRut" type="text" placeholder="Ej: 12.345.678-9" required />
      </label>
      <label class="cotz-field">
        <span>Tel√©fono (opcional)</span>
        <input id="cotzCliFono" type="tel" placeholder="Ej: +56 9 1234 5678" />
      </label>
    </div>
  </div>

  <!-- Secci√≥n 2: Productos -->
  <div class="cotz-section">
    <h2 class="cotz-h2">Productos</h2>

    <!-- Buscador -->
    <div class="cotz-searchbar">
      <input id="cotzBuscar" type="text" placeholder="Buscar por nombre o SKU..." />
      <button id="cotzBtnBuscar" class="cotz-btn-secondary">Buscar</button>
    </div>

    <!-- Resultados (2 filas x 5 columnas) -->
    <div id="cotzResultados" class="cotz-grid10">
      <!-- Cards generadas por JS -->
    </div>

    <!-- Planilla de √çtems -->
    <div class="cotz-table-wrap mt-16">
      <table class="cotz-table">
        <thead>
          <tr>
            <th style="width:100px">Cantidad</th>
            <th>Detalle</th>
            <th class="cotz-right" style="width:160px">Valor Unitario</th>
            <th class="cotz-right" style="width:160px">Valor Total</th>
            <th style="width:60px"></th>
          </tr>
        </thead>
        <tbody id="cotzTbodyItems">
          <!-- Items por JS -->
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="cotz-right"><strong>Total</strong></td>
            <td class="cotz-right"><strong id="cotzTotal">$0</strong></td>
            <td></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <!-- Secci√≥n 3: Datos DJOYAS -->
  <div class="cotz-section">
    <h2 class="cotz-h2">Datos DJOYAS</h2>

    <div class="cotz-grid2">
      <label class="cotz-field">
        <span>Sucursal *</span>
        <select id="cotzSucursal" required>
          <option value="">Selecciona...</option>
          <option>Santiago</option>
          <option>Concepci√≥n 1</option>
          <option>Concepci√≥n 2</option>
          <option>Temuco</option>
        </select>
      </label>
      <div></div>
    </div>

    <div class="cotz-h3">Mostrar en la cotizaci√≥n:</div>
    <div id="cotzChecklist" class="cotz-checklist">
      <label class="cotz-check">
        <input type="checkbox" data-text="Despacho gratis por compras sobre $100.000 en producto" checked>
        <span>Despacho gratis por compras sobre $100.000 en producto</span>
      </label>
      <label class="cotz-check">
        <input type="checkbox" data-text="Cotizaci√≥n a precio mayorista." checked>
        <span>Cotizaci√≥n a precio mayorista.</span>
      </label>
      <label class="cotz-check">
        <input type="checkbox" data-text="Cotizaci√≥n v√°lida por 15 d√≠as" checked>
        <span>Cotizaci√≥n v√°lida por 15 d√≠as</span>
      </label>
      <label class="cotz-check">
        <input type="checkbox" data-text="Puede ver m√°s opciones ingresando a nuestro sitio web, www.distribuidoradejoyas.cl" checked>
        <span>Puede ver m√°s opciones ingresando a nuestro sitio web, www.distribuidoradejoyas.cl</span>
      </label>
    </div>

    <div class="cotz-addnote">
      <input id="cotzNotaExtra" type="text" placeholder="Agregar otra nota (opcional)..." />
      <button id="cotzBtnAgregarNota" class="cotz-btn-secondary">Agregar</button>
    </div>
    <div id="cotzNotasExtras" class="cotz-notas-extras"></div>
  </div>

  <!-- BOT√ìN GUARDAR ABAJO DEL TODO -->
  <div class="cotz-section" style="display:flex; justify-content:flex-end; margin-top:1.25rem;">
    <button id="cotzBtnGuardar" class="cotz-btn-primary">Guardar cotizaci√≥n</button>
  </div>
</section>

</div>




  </div>


    

  </div>








<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>   

<!-- DataTables Bootstrap 5 JS -->
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<!-- Firebase Core -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


<!-- Tu script -->
<script src="js/modules/firebase-init.js"></script>
<script src="js/modules/modales.js"></script>
<script src="js/modules/tabs.js"></script>
<script type="module" src="js/modules/checkAuth.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="js/modules/cotizaciones.js"></script>
<script src="js/modules/permisos-tabs.js"></script>
<script src="js/modules/verificar-tabs.js"></script>
</body>
</html>
